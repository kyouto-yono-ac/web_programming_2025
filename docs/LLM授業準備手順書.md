# LLMを活用した授業資料作成手順書

この手順書は、Claude 3.7 Sonnetなどの大規模言語モデル（LLM）を活用して、授業資料（授業概要、スライド、講義ノートブック、演習ノートブック、解答ノートブック、Streamlit演習アプリ）を効率的に生成するための手順を説明します。

## 目次

1. [準備](#準備)
2. [ディレクトリ構造の作成](#ディレクトリ構造の作成)
3. [授業概要の生成](#授業概要の生成)
4. [スライドの生成](#スライドの生成)
5. [講義/演習ノートブック (Colab) の生成](#講義演習ノートブック-colab-の生成)
6. [演習アプリ (Streamlit) の生成](#演習アプリ-streamlit-の生成)
7. [資料の変換と仕上げ](#資料の変換と仕上げ)
8. [便利なプロンプト例](#便利なプロンプト例)

## 準備

### 前提条件

- Claude 3.7 Sonnet (Cursor, Claude Web, APIなど)またはGPT-4などのLLMにアクセスできること
- 授業計画（シラバス `docs/授業計画.md`）が完成していること
- Jupyter Notebook または JupyterLab 環境が利用可能であること (Colab含む)
- Python / Streamlit 実行環境 (ローカル or Codespaces / Streamlit Cloud)
- [オプション] MarpまたはMarp CLIがインストールされていること（スライドPDF変換用）

### 全体の流れ

1. 授業回ごとのディレクトリを作成
2. 授業概要（`nn_README.md`）の生成 **(複数回の修正・改善を含む)**
3. スライド（`nn_slide.md`）の生成 **(README確定後)**
4. 講義/演習ノートブック (Colab)（`nn_lecture.ipynb`, `nn_exercises.ipynb`, `nn_answers.ipynb`）の生成
5. 演習アプリ (Streamlit)（`src/lectureNN/app_*.py`, `src/lectureNN/app_*_a.py`）の生成
6. 資料の確認と微調整
7. 出席認証コードのスライドへの追加

### 命名規則サマリー

- **講義フォルダ:** `lectures/nn_タイトル/` (例: `lectures/03_Python基礎_2/`)
- **README:** `lectures/nn_タイトル/nn_README.md`
- **スライド(Marp):** `lectures/nn_タイトル/nn_slide.md`
- **スライド(PDF):** `lectures/nn_タイトル/nn_slide.pdf`
- **Colab講義ノートブック:** `lectures/nn_タイトル/nn_lecture.ipynb`
- **Colab演習ノートブック:** `lectures/nn_タイトル/nn_exercises.ipynb`
- **Colab解答ノートブック:** `lectures/nn_タイトル/nn_answers.ipynb`
- **Streamlit演習フォルダ:** `src/lectureNN/` (例: `src/lecture03/`)
- **Streamlit演習スクリプト:** `src/lectureNN/app_*.py` (例: `app_review.py`)
- **Streamlit解答スクリプト:** `src/lectureNN/app_*_a.py` (例: `app_review_a.py`)

### 出席認証コードの準備

プロジェクトルートにある `assets/CODE.csv` ファイルに、各回の授業で使用する出席認証コードが記載されています。このファイルは事前に準備しておく必要があります。

形式:
```csv
授業回,認証コード
1,XXXX
2,YYYY
...
```

## ディレクトリ構造の作成

各回の授業内容用に以下のディレクトリ構造を作成します：

```bash
# n回目の授業の場合（nは01, 02, ...）
mkdir -p lectures/nn_タイトル
# Streamlit演習ファイル用のディレクトリも作成
mkdir -p src/lectureNN # NNはゼロ埋めした授業回 (例: lecture03)
```

例（第3回の場合）：
```bash
mkdir -p lectures/03_Python基礎_2
mkdir -p src/lecture03
```

## 授業概要の生成

### プロンプト例（授業概要用）

```
[授業概要]の生成をお願いします。

授業情報:
- 回数: 第○回
- タイトル: 「○○○」
- 対象: 大妻女子大学 社会情報学部 社会情報学科 社会生活情報学専攻 3・4年生
- 前提知識: [前提条件を記載]
- 授業時間: 90分（実質60-70分程度）

以下のフォーマットで `nn_README.md` を作成してください (`nn` は授業回数):

1. タイトルと基本情報（時間、形式、必要機材）
2. 授業の目標（3-4つの具体的な目標）
3. タイムスケジュール（時間配分を含む）
4. 授業内容の詳細（各セクションの説明）
5. 準備物（教員側・学生側）
6. 配布資料
7. 次回予告

なお、授業計画全体は以下の通りです:
[授業計画.mdからの抜粋を記載]
```

### 生成されたREADME.mdの確認、改善、保存

1.  **内容確認:** LLMが生成した内容が、意図した授業内容（目標、タイムスケジュール、詳細）と合っているか確認します。
2.  **整合性チェック:** 全体の授業計画 (`docs/授業計画.md`) と比較し、内容やトピックの範囲に矛盾がないか確認します。
3.  **反復改善:** 内容の修正（例: 時間配分の変更、項目の追加・削除）や、授業計画との矛盾解消が必要な場合、LLMに追加指示を出して `nn_README.md` を**複数回修正・改善**します。
    *   例: 「タイムスケジュールを変更して、○○の時間を増やし、××の演習を追加してください。」
    *   例: 「授業計画と比較して矛盾があるので、第○回の内容から△△を除外してください。」
4.  **保存:** 最終的に確定した内容を以下のパスに保存します：
    ```
    lectures/nn_タイトル/nn_README.md
    ```
    例: `lectures/03_Python基礎_2/03_README.md`

## スライドの生成

### プロンプト例（スライド用）

```
[スライド]の生成をお願いします。

以下の **確定した授業概要** に基づいて、Marp形式のスライドを作成してください:
[最終的に確定した nn_README.md の内容]

スライドの要件:
1. Marp形式のMarkdown（---で区切られたスライド）
2. 1枚目は表紙 (`<!-- _class: lead -->` を使用)、最後はまとめと質疑応答用
3. 1枚目の表紙には、タイトル、担当者名、出席認証コード ([事前に準備したコードを指定])、授業資料の場所 (`授業資料: https://x.gd/NoqkC ...`) を記載する
4. 各トピックは視覚的に分かりやすく、READMEのタイムスケジュールや内容詳細と流れを合わせる
5. コードサンプルを含める場合は、短く実行可能なもの
6. **演習を促す箇所では、正しい演習ファイル名（Colabなら `nn_lecture.ipynb`, `nn_exercises.ipynb`、Streamlitなら `src/lectureNN/app_*.py` など）を記載する**
7. 文字サイズは適切に調整（スタイルシートで調整可）
8. 全体で20-30枚程度

以下のMarpヘッダーを使用してください:
---
marp: true
theme: default
paginate: true
header: "大妻女子大学 社会情報学部 WebプログラミングI" # 必要に応じて変更
footer: "第○回：[タイトル]"
size: 16:9
style: |
  section { /* フォントサイズなど調整 */ }
  /* ... 他のスタイル ... */
---

ファイル名は `nn_slide.md` としてください (`nn` は授業回数)。
```

### 生成されたslide.mdの確認と保存

1.  **内容確認:** 生成されたスライドの流れが `nn_README.md` と一致しているか、内容に誤りがないか確認します。
2.  **ファイル名確認:** スライド内で言及されている演習ファイル名 (`.ipynb` や `.py`) が、実際に作成する予定のファイル名と一致しているか確認します。
3.  **修正:** 必要であれば、LLMに指示して修正するか、手動で修正します。
4.  **保存:** 以下のパスに保存します：
    ```
    lectures/nn_タイトル/nn_slide.md
    ```
    例: `lectures/03_Python基礎_2/03_slide.md`

## 講義/演習ノートブック (Colab) の生成

**Colab (Jupyter Notebook) で実行する講義や演習用のノートブックを作成します。**

### プロンプト例（講義ノートブック用 `nn_lecture.ipynb`）

```
[講義ノートブック]の生成をお願いします。

授業テーマ: [タイトル] (第○回)
対象: [対象学生の情報]
授業概要:
[nn_README.md の内容]
対応するスライド:
[nn_slide.md の主要な流れやコード例]

以下の要件で Jupyter Notebook (`.ipynb`) 形式の講義ノートブックを作成してください:
1. スライドの流れに沿った構成（Markdownセルで説明、Codeセルでコード例）
2. コードセルは実行可能で、実行結果も含むことが望ましい
3. 各コードセルには適切なコメントを付与
4. 重要な概念はMarkdownセルで強調
5. 授業時間内でカバーできる分量

ファイル名は `nn_lecture.ipynb` としてください (`nn` は授業回数)。
```

### プロンプト例（演習ノートブック用 `nn_exercises.ipynb`）

```
[演習ノートブック]の生成をお願いします。

授業テーマ: [タイトル] (第○回)
講義ノートブックの内容:
[nn_lecture.ipynb の要約または主要なコードスニペット]

以下の要件で Jupyter Notebook (`.ipynb`) 形式の演習ノートブックを作成してください:
1. 講義内容(`nn_lecture.ipynb`)の理解度を確認するための演習問題を3-5問程度
2. 難易度は段階的に設定
3. 各問題には、解くべき内容と期待される出力形式を明記
4. 学生がコードを記述するための空のコードセルを用意
5. 必要に応じて、ヒントや参考資料へのリンクを記載

ファイル名は `nn_exercises.ipynb` としてください (`nn` は授業回数)。
```

### プロンプト例（演習解答ノートブック用 `nn_answers.ipynb`）

```
[演習解答ノートブック]の生成をお願いします。

演習ノートブックの内容:
[nn_exercises.ipynb の内容]

以下の要件で Jupyter Notebook (`.ipynb`) 形式の演習解答ノートブックを作成してください:
1. `nn_exercises.ipynb` の各問題に対する解答コードを記載
2. 解答コードは実行可能であり、想定される実行結果も示す
3. 必要に応じて、解答コードの解説や別解をMarkdownセルで追記

ファイル名は `nn_answers.ipynb` としてください (`nn` は授業回数)。
```

### 生成されたノートブックの確認と保存

1.  **実行確認:** 生成された各ノートブック (`lecture`, `exercises`, `answers`) をJupyter環境 (Colabなど) で開き、コードがエラーなく実行できるか確認します。
2.  **内容確認:** 講義内容、問題、解答が適切か、解説が十分か確認します。
3.  **修正:** 必要に応じて修正します。
4.  **保存:** 対応する `lectures/nn_タイトル/` ディレクトリに保存します。
    例: `lectures/03_Python基礎_2/03_lecture.ipynb`

## 演習アプリ (Streamlit) の生成

**Streamlit を使った演習用の `.py` スクリプトを作成します。**

### プロンプト例（Streamlit演習アプリ用 `app_*.py`）

```
[Streamlit演習アプリ]の生成をお願いします。

授業テーマ: [タイトル] (第○回)
演習の目的: [例: 第N回の復習、制御構造の応用]
必要な機能: [例: st.text_inputで数値を受け取り、if文で偶奇判定して結果をst.writeで表示する]
関連する授業内容:
[nn_README.md や nn_slide.md の関連部分]

以下の要件で Streamlit アプリケーションの Python スクリプト (`.py`) を作成してください:
1. 必要なライブラリ (`streamlit as st` など) をインポートする
2. 上記「必要な機能」を満たす Streamlit ウィジェットと Python ロジックを実装する
3. 学生が追記・変更しやすいように、シンプルな構造にする
4. コードには適度なコメントを付与する

ファイル名は `app_[演習内容を示す短い名前].py` としてください。(例: `app_review.py`, `app_if_example.py`)
```

### プロンプト例（Streamlit演習解答アプリ用 `app_*_a.py`）

```
[Streamlit演習解答アプリ]の生成をお願いします。

対応する演習アプリ: `app_[演習内容を示す短い名前].py`
演習の目的と必要な機能:
[上記演習アプリ生成時の情報]

以下の要件で Streamlit アプリケーションの Python スクリプト (`.py`) を作成してください:
1. `app_[演習内容を示す短い名前].py` に対する解答例となるコードを実装する
2. 必要なライブラリ (`streamlit as st` など) をインポートする
3. 完成した動作するコードを記述する
4. 適度なコメントを付与する

ファイル名は演習ファイル名の末尾に `_a` を付けた `app_[演習内容を示す短い名前]_a.py` としてください。(例: `app_review_a.py`)
```

### 生成されたスクリプトの確認と保存

1.  **実行確認:** 生成された `.py` スクリプトを `streamlit run [ファイル名].py` で実行し、意図通りに動作するか確認します。
2.  **内容確認:** コードが演習/解答の要件を満たしているか、コメントが適切か確認します。
3.  **修正:** 必要に応じて修正します。
4.  **保存:** 対応する `src/lectureNN/` ディレクトリに保存します。
    例: `src/lecture03/app_review.py`, `src/lecture03/app_review_a.py`

## 資料の変換と仕上げ

### Marpによるスライド変換（PDF）

```bash
# Marp CLIがインストール済みの場合
marp --pdf lectures/nn_タイトル/nn_slide.md

# または
# VSCodeのMarp拡張機能を使用して変換
```
例: `marp --pdf lectures/03_Python基礎_2/03_slide.md`

### 最終確認

- `nn_README.md`の内容（特にタイムスケジュール）が最終版か
- `nn_slide.md`が正しくPDFに変換されているか、Marpヘッダー（フッターの回数、タイトルなど）が正しいか
- **資料間の一貫性:**
    - READMEのタイムスケジュールとスライドの流れが一致しているか
    - スライド内で参照されているファイル名 (`.ipynb`, `.py`) は存在し、正しいか
    - 各ノートブック、スクリプトの内容がREADMEやスライドの記述と合致しているか
- **ファイル命名規則:** 全てのファイルが指定された命名規則に従っているか
- `nn_lecture.ipynb`, `nn_exercises.ipynb`, `nn_answers.ipynb` がエラーなく実行できるか
- `app_*.py`, `app_*_a.py` が `streamlit run` でエラーなく実行できるか
- 前回の内容との連続性があるか
- 出席認証コードがスライドの1枚目に正しく記載されているか

## 便利なプロンプト例

### 修正・改善プロンプト

```
以下の[ファイル種類] (`ファイル名`) を改善してください:

[現在のファイル内容 または 要約]

改善点:
1. [具体的な改善点1]
2. [具体的な改善点2]
3. [具体的な改善点3]

全体的な方針として[方針を記載]
```

### 連続性確保プロンプト

```
以下は前回（第○回）の授業内容です:
[前回の授業内容要約 または nn_README.md の内容]

次回（第○回）の授業内容を、前回の内容からの自然な流れで作成してください。
特に以下の点に注意してください:
1. 前回の復習から始める
2. 前回の概念を発展させる
3. 新しい概念の導入は段階的に行う
```

### 専門レベル調整プロンプト

```
以下の内容を、[対象学生の情報]向けに調整してください:

[調整したい内容 または ファイル名]

特に注意点:
- 専門用語の説明を追加
- 具体的な例やアナロジーを含める
- 視覚的な説明を強化（スライドやノートブックの場合）
- 難しい概念は段階的に導入
```

この手順書に従って、効率的に授業資料を生成・管理できます。LLMの出力は常に確認し、必要に応じて修正することで、質の高い授業資料を準備しましょう。 
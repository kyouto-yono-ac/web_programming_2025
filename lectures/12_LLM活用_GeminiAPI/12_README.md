# ç¬¬12å› æˆæ¥­æ¦‚è¦ï¼šLLMæ´»ç”¨ - Gemini APIã¨ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆé–‹ç™º

## 1. åŸºæœ¬æƒ…å ±
- **æˆæ¥­å›:** ç¬¬12å›
- **ã‚¿ã‚¤ãƒˆãƒ«:** LLMæ´»ç”¨ - Gemini APIã¨ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆé–‹ç™º
- **èªè¨¼ã‚³ãƒ¼ãƒ‰:** 4802
- **æ™‚é–“:** 90åˆ†
- **å½¢å¼:** è¬›ç¾© + å®Ÿç¿’
- **å¿…è¦æ©Ÿæ:**
    - **æ•™å“¡:** PCã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ã‚¿ãƒ¼
    - **å­¦ç”Ÿ:** PC (Streamlitå®Ÿè¡Œç’°å¢ƒã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶š)

## 2. æˆæ¥­ã®ç›®æ¨™
### ğŸ¯ æœ€çµ‚çš„ãªæˆæœç‰©
**ã€Œå¿è€…ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã€**
- Gemini APIã‚’æ´»ç”¨ã—ãŸAIæ­è¼‰ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆ
- å€‹æ€§è±Šã‹ãªã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¨­å®šã«ã‚ˆã‚‹å·®åˆ¥åŒ–ã•ã‚ŒãŸä¼šè©±
- æ—¢å­˜ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¸ã®AIæ©Ÿèƒ½çµ±åˆ

### å…·ä½“çš„ãªå­¦ç¿’ç›®æ¨™
1. **Gemini API**: Google AI Studioã§ã®å–å¾—æ–¹æ³•ã¨APIã‚­ãƒ¼ç®¡ç†
2. **ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆåŸºç¤**: Streamlitã§ã®åŸºæœ¬çš„ãªãƒãƒ£ãƒƒãƒˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹æ§‹ç¯‰
3. **ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°**: ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¨­å®šã«ã‚ˆã‚‹ä¸€è²«æ€§ã®ã‚ã‚‹å¿œç­”ç”Ÿæˆ
4. **æ—¢å­˜ã‚¢ãƒ—ãƒªæ”¹è‰¯**: å¤–éƒ¨ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ãŸæ©Ÿèƒ½æ‹¡å¼µ
5. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: APIã‚­ãƒ¼ã®å®‰å…¨ãªç®¡ç†ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

## 3. ã‚¿ã‚¤ãƒ ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆ90åˆ†ï¼‰
| æ™‚é–“ | å†…å®¹ | è©³ç´° |
| --- | --- | --- |
| 20åˆ† | **Part 1: Gemini APIå–å¾—ã¨è¨­å®š** | Google AI Studioã€APIã‚­ãƒ¼å–å¾—ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£èª¬æ˜ã€åŸºæœ¬çš„ãªä½¿ã„æ–¹ |
| 35åˆ† | **Part 2: åŸºæœ¬ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã®ä½œæˆ** | Streamlitãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´ç®¡ç†ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° |
| 35åˆ† | **Part 3: ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ã®å®Ÿè£…** | ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã€ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å®Ÿè£… |

## 4. æˆæ¥­å†…å®¹ã®è©³ç´°

### Part 1: Gemini APIå–å¾—ã¨è¨­å®šï¼ˆ20åˆ†ï¼‰
#### ç›®æ¨™ï¼šGemini APIã®åŸºæœ¬ç’°å¢ƒã‚’æ§‹ç¯‰ã—ã€å®‰å…¨ã«ä½¿ç”¨ã§ãã‚‹

**1-1. Google AI Studio ã®åˆ©ç”¨ï¼ˆ8åˆ†ï¼‰**
- LLMï¼ˆå¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«ï¼‰ã¨Geminiã®æ¦‚è¦èª¬æ˜
- Google AI Studioï¼ˆhttps://aistudio.google.com/ï¼‰ã‚¢ã‚¯ã‚»ã‚¹
- Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã®ãƒ­ã‚°ã‚¤ãƒ³
- è¬›å¸«ã«ã‚ˆã‚‹APIã‚­ãƒ¼å–å¾—ã®ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

**1-2. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ï¼ˆ7åˆ†ï¼‰**
```bash
# 1. .streamlit/secrets.tomlãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
mkdir .streamlit
echo 'GEMINI_API_KEY = "your_api_key_here"' > .streamlit/secrets.toml
```

```python
# 2. Streamlit Secretsã§ã®ç®¡ç†ï¼ˆæ¨å¥¨ï¼‰
import streamlit as st
api_key = st.secrets["GEMINI_API_KEY"]

# çµ¶å¯¾ã«ã‚„ã£ã¦ã¯ã„ã‘ãªã„ã“ã¨
api_key = "AIzaSy..."  # ã‚³ãƒ¼ãƒ‰ã«ç›´æ¥æ›¸ã
```

**é‡è¦:** `.streamlit/secrets.toml`ãƒ•ã‚¡ã‚¤ãƒ«ã¯è‡ªå‹•çš„ã«`.gitignore`ã«å«ã¾ã‚Œã‚‹ãŸã‚ã€å®‰å…¨ã§ã™ã€‚

**1-3. åŸºæœ¬çš„ãªä½¿ã„æ–¹ï¼ˆ5åˆ†ï¼‰**
```python
import google.generativeai as genai

# APIè¨­å®š
genai.configure(api_key=api_key)

# ãƒ¢ãƒ‡ãƒ«åˆæœŸåŒ–ã¨ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆ
model = genai.GenerativeModel('gemini-pro')
response = model.generate_content("ã“ã‚“ã«ã¡ã¯")
print(response.text)
```

### Part 2: åŸºæœ¬ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã®ä½œæˆï¼ˆ35åˆ†ï¼‰
#### ç›®æ¨™ï¼šStreamlitã§å‹•ä½œã™ã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã‚’å®Œæˆã•ã›ã‚‹

**2-1. Streamlitãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ã®å®Ÿè£…ï¼ˆ15åˆ†ï¼‰**
```python
import streamlit as st

# ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´ã‚’ç®¡ç†
if "messages" not in st.session_state:
    st.session_state.messages = []

# éå»ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
for message in st.session_state.messages:
    with st.chat_message(message["role"]):
        st.markdown(message["content"])

# ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›
prompt = st.chat_input("ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›")
if prompt:
    # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿½åŠ ãƒ»è¡¨ç¤º
    st.session_state.messages.append({"role": "user", "content": prompt})
    with st.chat_message("user"):
        st.markdown(prompt)
```

**2-2. AIå¿œç­”ã®ç”Ÿæˆã¨çµ±åˆï¼ˆ12åˆ†ï¼‰**
```python
# AIå¿œç­”ã®ç”Ÿæˆãƒ»è¡¨ç¤º
with st.chat_message("assistant"):
    response = model.generate_content(prompt)
    ai_response = response.text
    st.markdown(ai_response)

# AIå¿œç­”ã‚’å±¥æ­´ã«è¿½åŠ 
st.session_state.messages.append({"role": "assistant", "content": ai_response})
```

**2-3. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨UIæ”¹å–„ï¼ˆ8åˆ†ï¼‰**
```python
try:
    response = model.generate_content(prompt)
    ai_response = response.text
except Exception as e:
    ai_response = "ç”³ã—è¨³ã‚ã‚Šã¾ã›ã‚“ã€‚ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚"
    st.error(f"ã‚¨ãƒ©ãƒ¼: {e}")

# UIã®æ”¹å–„
with st.sidebar:
    if st.button("ä¼šè©±å±¥æ­´ã‚’ã‚¯ãƒªã‚¢"):
        st.session_state.messages = []
        st.rerun()
```

### Part 3: ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ã®å®Ÿè£…ï¼ˆ35åˆ†ï¼‰
#### ç›®æ¨™ï¼šæ—¢å­˜ãƒªãƒã‚¸ãƒˆãƒªã‚’æ‹¡å¼µã—ã€å€‹æ€§çš„ãªã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã¨ã®ä¼šè©±ã‚’å®Ÿç¾

**3-1. ãƒªãƒã‚¸ãƒˆãƒªã®ç†è§£ã¨æº–å‚™ï¼ˆ10åˆ†ï¼‰**
```bash
# streamlit_2025 ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/OWU131323104/streamlit_2025.git
cd streamlit_2025

# æ—¢å­˜ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ç¢ºèª
streamlit run app.py
```

**3-2. ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã®å®Ÿè£…ï¼ˆ15åˆ†ï¼‰**
```python
# ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¨­å®šãƒ‡ãƒ¼ã‚¿
CHARACTERS = {
    "danzou": {
        "name": "æ®µè”µ",
        "personality": "ã‚¯ãƒ¼ãƒ«ã§å¯¡é»™ã ãŒã€å¿ƒã¯å„ªã—ã„å¿è€…",
        "speech_style": "ã€Œã€œã ã€ã€Œã€œã§ã‚ã‚‹ã€ã¨ã„ã†æ­¦å£«çš„ãªå£èª¿",
        "specialty": "éš å¯†è¡Œå‹•ã€æ‰‹è£å‰£è¡“",
        "image": "danzou.webp"
    }
}

# ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ç”Ÿæˆ
def create_character_prompt(character_key):
    char = CHARACTERS[character_key]
    return f"""
ã‚ãªãŸã¯ã€Œ{char['name']}ã€ã¨ã—ã¦ä¼šè©±ã—ã¦ãã ã•ã„ã€‚

ã€è¨­å®šã€‘
- æ€§æ ¼: {char['personality']}
- å£èª¿: {char['speech_style']}
- å¾—æ„åˆ†é‡: {char['specialty']}

ã“ã®è¨­å®šã‚’ä¸€è²«ã—ã¦ä¿ã£ã¦ãã ã•ã„ã€‚
"""
```

**3-3. ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼é¸æŠã¨UIçµ±åˆï¼ˆ10åˆ†ï¼‰**
```python
# ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼é¸æŠ
selected_char = st.sidebar.selectbox(
    "ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’é¸æŠ:",
    options=list(CHARACTERS.keys()),
    format_func=lambda x: CHARACTERS[x]["name"]
)

# ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æƒ…å ±è¡¨ç¤º
char_info = CHARACTERS[selected_char]
st.sidebar.image(char_info["image"], width=150)
st.sidebar.write(f"**æ€§æ ¼**: {char_info['personality']}")

# ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å¿œç­”ã®ç”Ÿæˆ
character_prompt = create_character_prompt(selected_char)
full_prompt = character_prompt + f"\n\nãƒ¦ãƒ¼ã‚¶ãƒ¼: {prompt}\n{char_info['name']}:"
response = model.generate_content(full_prompt)
```

## 5. æº–å‚™ç‰©
- **æ•™å“¡å´:**
    - Google AI Studio ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆãƒ‡ãƒ¢ç”¨ï¼‰
    - `src/lecture12/` å†…ã®å®Ÿç¿’ãƒ•ã‚¡ã‚¤ãƒ«
    - `lectures/12_LLMæ´»ç”¨_GeminiAPI/12_slide.md` (æˆæ¥­ã‚¹ãƒ©ã‚¤ãƒ‰)
- **å­¦ç”Ÿå´:**
    - PCã€Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
    - ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šç’°å¢ƒ
    - Streamlitå®Ÿè¡Œç’°å¢ƒ
    - **`.streamlit/secrets.toml`ãƒ•ã‚¡ã‚¤ãƒ«ã®æº–å‚™**ï¼ˆAPIã‚­ãƒ¼è¨­å®šç”¨ï¼‰

## 6. é…å¸ƒè³‡æ–™
- `src/lecture12/basic_chatbot.py` (åŸºæœ¬ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆ)
- `src/lecture12/character_chat_template.py` (ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒãƒ£ãƒƒãƒˆãƒ»ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ)
- `src/lecture12/character_chat_answer.py` (ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒãƒ£ãƒƒãƒˆãƒ»è§£ç­”ç‰ˆ)
- `src/lecture12/README.md` (å®Ÿç¿’ã‚¬ã‚¤ãƒ‰)

## 7. ä½¿ç”¨æŠ€è¡“ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
```bash
# å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install google-generativeai streamlit pillow
```

### ä¸»è¦ãªæ–°æ©Ÿèƒ½
- `google.generativeai`: Gemini APIæ“ä½œ
- `st.chat_message()`: ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
- `st.chat_input()`: ãƒãƒ£ãƒƒãƒˆå…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
- `st.session_state`: ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ç®¡ç†ï¼ˆå±¥æ­´ä¿æŒï¼‰

## 8. è©•ä¾¡ãƒã‚¤ãƒ³ãƒˆ
### åŸºæœ¬è¦ä»¶ï¼ˆ60%ï¼‰
- [ ] Gemini APIãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹
- [ ] åŸºæœ¬çš„ãªãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒé©åˆ‡ã«è¡Œã‚ã‚Œã¦ã„ã‚‹

### å¿œç”¨è¦ä»¶ï¼ˆ40%ï¼‰
- [ ] ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¨­å®šãŒé©åˆ‡ã«åæ˜ ã•ã‚Œã¦ã„ã‚‹
- [ ] UI/UXãŒä½¿ã„ã‚„ã™ãè¨­è¨ˆã•ã‚Œã¦ã„ã‚‹
- [ ] ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã«å·¥å¤«ãŒè¦‹ã‚‰ã‚Œã‚‹

## 9. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ³¨æ„äº‹é …
âš ï¸ **é‡è¦ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶**
- APIã‚­ãƒ¼ã¯çµ¶å¯¾ã«ã‚³ãƒ¼ãƒ‰ã«ç›´æ¥è¨˜è¿°ã—ãªã„
- **`.streamlit/secrets.toml`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨**ï¼ˆè‡ªå‹•çš„ã«`.gitignore`ã«å«ã¾ã‚Œã‚‹ï¼‰
- GitHubãªã©ã®å…¬é–‹ãƒªãƒã‚¸ãƒˆãƒªã«APIã‚­ãƒ¼ã‚’å«ã‚ãªã„
- ä½¿ç”¨é‡åˆ¶é™ã‚’é©åˆ‡ã«è¨­å®šã™ã‚‹
- APIã‚­ãƒ¼ã¯ä»–äººã¨å…±æœ‰ã—ãªã„

âœ… **Streamlit Secretsã®åˆ©ç‚¹**
- ãƒ•ã‚¡ã‚¤ãƒ«ãŒè‡ªå‹•çš„ã«Gitã§ç„¡è¦–ã•ã‚Œã‚‹
- ãƒ­ãƒ¼ã‚«ãƒ«ã¨ã‚¯ãƒ©ã‚¦ãƒ‰ã®ä¸¡æ–¹ã§å‹•ä½œ
- è¨­å®šãŒç°¡å˜ã§ç®¡ç†ã—ã‚„ã™ã„

## 10. æ¬¡å›äºˆå‘Š
ç¬¬13å›ã§ã¯ã€ä»Šå›ä½œæˆã—ãŸLLMæ©Ÿèƒ½ã¨ã€ã“ã‚Œã¾ã§ã«å­¦ç¿’ã—ãŸãƒ‡ãƒ¼ã‚¿åˆ†æãƒ»å¯è¦–åŒ–æ©Ÿèƒ½ã‚’çµ„ã¿åˆã‚ã›ãŸç·åˆçš„ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã‚’è¡Œã„ã¾ã™ã€‚

**äºˆå®šå†…å®¹:**
- ãƒ‡ãƒ¼ã‚¿åˆ†æçµæœã®è‡ªå‹•è§£èª¬æ©Ÿèƒ½
- ã‚°ãƒ©ãƒ•ã®èª¬æ˜æ–‡ç”Ÿæˆ
- ã‚¤ãƒ³ã‚µã‚¤ãƒˆã®è‡ªå‹•æŠ½å‡º
- ç·åˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®å®Œæˆ

ãƒ‡ãƒ¼ã‚¿ã¨AIã®èåˆã«ã‚ˆã‚‹å®Ÿç”¨çš„ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Œæˆã•ã›ã¾ã—ã‚‡ã†ï¼ 
# 第14回 最終課題演習(2): 制作完成・デプロイ

**出席認証コード: [授業開始時に発表]**

こんにちは！最終課題演習の第2回目です。前回開始した制作を完成させ、GitHubにアップロードして、Streamlit Community Cloudでデプロイ（Web公開）まで行います。

## 1. 本日の目標

1. **機能完成**: 前回から続けて、アプリの機能を完成させる
2. **UI/UX改善**: 使いやすさと見た目を向上させる
3. **デプロイ**: GitHubアップロード → Streamlit Community Cloudでの公開
4. **動作確認**: 公開されたアプリの動作テスト・バグ修正

## 2. 本日のタイムスケジュール

| 時間          | 内容                                     |
|---------------|------------------------------------------|
| 00:00 - 00:05 | 前回の進捗確認・本日の目標説明            |
| 00:05 - 01:00 | 制作の続行・機能完成                      |
| 01:00 - 01:10 | UI/UX改善・最終調整                      |
| 01:10 - 01:20 | GitHubアップロード・デプロイ              |
| 01:20 - 01:25 | 動作確認・バグ修正                        |
| 01:25 - 01:30 | アプリ説明シート記入・まとめ              |

## 3. 制作完成のポイント

### 機能面のチェックリスト
- [ ] **必須機能**: 選択したテーマの必須機能がすべて動作する
- [ ] **エラーハンドリング**: 異常な入力に対する適切な処理
- [ ] **データ処理**: データの読み込み・加工が正しく動作する
- [ ] **AI機能**: （該当テーマの場合）AIの応答が適切に表示される

### UI/UX面のチェックリスト
- [ ] **レイアウト**: 画面構成が整理されている
- [ ] **操作性**: ユーザーが迷わずに操作できる
- [ ] **視覚的魅力**: 色使い、フォント、画像が適切
- [ ] **レスポンシブ**: 異なる画面サイズでも表示される

### 技術面のチェックリスト
- [ ] **パフォーマンス**: データ処理が高速（`@st.cache_data`活用）
- [ ] **セキュリティ**: APIキーが適切に管理されている
- [ ] **エラー対応**: 例外処理が適切に実装されている
- [ ] **コード品質**: コメントがあり、読みやすい

## 4. UI/UX改善のテクニック

### 1. ページ設定の最適化
```python
st.set_page_config(
    page_title="あなたのアプリ名",
    page_icon="🎯",  # 適切なアイコン
    layout="wide",   # 横幅を広く使う
    initial_sidebar_state="expanded"  # サイドバーを開いておく
)
```

### 2. 美しいタイトルとヘッダー
```python
st.title("🎯 あなたのアプリ名")
st.markdown("---")  # 区切り線
st.markdown("### 📋 機能説明")
st.info("このアプリの使い方をここに書きます")
```

### 3. サイドバーの活用
```python
with st.sidebar:
    st.header("🔧 設定")
    # 設定項目をここに配置
    
    st.header("ℹ️ 情報")
    st.markdown("**作成者**: あなたの名前")
    st.markdown("**バージョン**: 1.0")
```

### 4. タブによる機能分割
```python
tab1, tab2, tab3 = st.tabs(["📊 分析", "📈 グラフ", "🤖 AI"])

with tab1:
    # 分析機能
    pass

with tab2:
    # グラフ表示
    pass

with tab3:
    # AI機能
    pass
```

### 5. 適切な色とスタイル
```python
# 成功メッセージ
st.success("✅ 処理が完了しました！")

# 警告メッセージ
st.warning("⚠️ 注意：この操作は時間がかかる場合があります")

# エラーメッセージ
st.error("❌ エラーが発生しました")

# 情報メッセージ
st.info("💡 ヒント：この機能は...")
```

### 6. プログレス表示
```python
with st.spinner("データを処理中..."):
    # 時間のかかる処理
    time.sleep(2)
    
# プログレスバー
progress_bar = st.progress(0)
for i in range(100):
    progress_bar.progress(i + 1)
    time.sleep(0.01)
```

## 5. GitHubアップロード手順

### 5-1. リポジトリの準備
1. **GitHub.com**で新しいリポジトリを作成
   - リポジトリ名: `final-project-streamlit`（または適切な名前）
   - Public設定
   - 「Add a README file」にチェック

### 5-2. 必要ファイルの準備
```
your-project/
├── app.py              # メインアプリファイル
├── requirements.txt    # 依存ライブラリ
├── .streamlit/
│   └── secrets.toml   # APIキー（ローカル用）
└── README.md          # プロジェクト説明
```

### 5-3. requirements.txtの作成
```txt
streamlit
pandas
plotly
google-generativeai
Pillow
```

### 5-4. GitHub.devでのアップロード
1. 作成したリポジトリのURLの`.com`を`.dev`に変更
2. GitHub.devエディタが開く
3. ファイルをドラッグ&ドロップまたは作成
4. 左側「Source Control」でコミット&プッシュ

## 6. Streamlit Community Cloudでのデプロイ

### 6-1. デプロイ手順
1. **Streamlit Community Cloud**（https://share.streamlit.io/）にアクセス
2. GitHubアカウントでログイン
3. 「New app」をクリック
4. リポジトリ・ブランチ・メインファイルを選択
5. 「Deploy!」をクリック

### 6-2. Secretsの設定（Gemini API使用の場合）
1. デプロイ後の設定画面で「Secrets」を選択
2. 以下の形式でAPIキーを設定：
```toml
GEMINI_API_KEY = "your_actual_api_key_here"
```

### 6-3. デプロイ確認
- アプリのURLが生成される
- 数分で公開される
- エラーがある場合はログを確認

## 7. よくある問題と解決方法

### 問題1: モジュールが見つからない
```
ModuleNotFoundError: No module named 'plotly'
```
**解決方法**: `requirements.txt`に必要なライブラリを追加

### 問題2: APIキーが読み込めない
```
KeyError: 'GEMINI_API_KEY'
```
**解決方法**: Streamlit Community CloudのSecretsを正しく設定

### 問題3: データファイルが見つからない
```
FileNotFoundError: No such file or directory: 'data.csv'
```
**解決方法**: データファイルをリポジトリに含める、または絶対パスを確認

### 問題4: 画像が表示されない
**解決方法**: 画像ファイルをリポジトリに含める、または外部URLを使用

## 8. 各テーマ別の完成チェックポイント

### データ分析・可視化系（テーマ1-3）
- [ ] CSVデータが正しく読み込まれる
- [ ] フィルタリング機能が動作する
- [ ] グラフが適切に表示される
- [ ] インタラクティブ操作が可能
- [ ] エラーハンドリングが適切

### LLM活用系（テーマ4-6）
- [ ] Gemini APIが正しく動作する
- [ ] キャラクター設定が反映される
- [ ] 会話履歴が保存される
- [ ] エラー時の対応が適切
- [ ] UIが使いやすい

### 総合系（テーマ7-9）
- [ ] データ分析機能が動作する
- [ ] AI機能が正しく動作する
- [ ] 両機能が適切に連携する
- [ ] パフォーマンスが良好
- [ ] 全体の統合性が高い

## 9. アプリ説明シート

制作完了後、以下の情報を整理してください：

### 基本情報
- **アプリ名**: 
- **選択テーマ**: 
- **使用技術**: 
- **デプロイURL**: 

### 機能説明
- **主要機能**: 
- **特徴的な機能**: 
- **工夫した点**: 

### 技術的な工夫
- **使用したライブラリ**: 
- **データ処理の工夫**: 
- **UI/UXの工夫**: 

### 今後の改善点
- **追加したい機能**: 
- **改善したい点**: 

## 10. 次回予告

**第15回: 最終課題演習(3) - 発表・相互評価**
- 各自のアプリ発表（3分程度）
- グループでの相互評価
- 優秀作品の選出・表彰
- コース全体の振り返り

**発表内容**:
1. アプリの概要・機能説明
2. 工夫した点・苦労した点
3. 実際のデモンストレーション

**準備事項**:
- 発表内容の整理
- デモの練習
- 質疑応答の準備

## 11. 最後に

最終課題演習の第2回目、お疲れ様でした！制作したアプリが実際にWeb上で動作するのを見るのは、とても達成感があると思います。

次回は発表会です。今日完成させたアプリを堂々と発表してください。皆さんの創意工夫を楽しみにしています！

**困ったことがあれば、遠慮なく質問してください。**
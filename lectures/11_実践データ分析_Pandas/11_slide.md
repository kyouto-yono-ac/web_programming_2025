---
marp: true
theme: default
paginate: true
header: "å¤§å¦»å¥³å­å¤§å­¦ ç¤¾ä¼šæƒ…å ±å­¦éƒ¨ Webãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°I"
footer: "ç¬¬11å›ï¼šãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ»åˆ†æãƒ»å¯è¦–åŒ–ã®ç·åˆå®Ÿè·µ (Pandas)"
size: 16:9
style: |
  section { font-size: 1.4em; }
  h1 { font-size: 2.0em; }
  h2 { font-size: 1.7em; }
  h3 { font-size: 1.5em; }
  code {
    font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
    font-size: 0.9em;
    background-color: #f0f0f0;
    padding: 0.1em 0.3em;
    border-radius: 3px;
  }
  pre code {
    display: block;
    padding: 0.5em;
    overflow-x: auto;
    font-size: 0.8em;
  }
  .lead h1 {
    font-size: 2.8em;
  }
  .lead h2 {
    font-size: 2.0em;
  }
  .lead p {
    font-size: 1.6em;
  }
---

<!-- _class: lead -->

# ç¬¬11å›
## ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ»åˆ†æãƒ»å¯è¦–åŒ–ã®ç·åˆå®Ÿè·µ (Pandas)

å‡ºå¸­èªè¨¼ã‚³ãƒ¼ãƒ‰: **7394**

---

## ğŸ“‹ æœ¬æ—¥ã®ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

**ğŸ¯ æœ€çµ‚ç›®æ¨™ï¼šã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ“ã‚¶ç™ºè¡Œæ•°åˆ†æãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**

| Part | å†…å®¹ | æˆæœç‰© |
|------|------|--------|
| Part 1 | **PandasåŸºç¤** | ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ãƒ»è¦³å¯Ÿãƒ»åŸºæœ¬ãƒ•ã‚£ãƒ«ã‚¿ |
| Part 2 | **ãƒ‡ãƒ¼ã‚¿åˆ†æ** | é›†è¨ˆãƒ»ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ»è¤‡æ•°æ¡ä»¶ |
| Part 3 | **Streamlité€£æº** | ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–UI |
| Part 4 | **ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–** | ç¾ã—ã„ã‚°ãƒ©ãƒ•ãƒ»ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ |
| Part 5 | **çµ±åˆ** | å®Œæˆç‰ˆã‚¢ãƒ—ãƒª |

---

<!-- _class: lead -->

## å®Œæˆç‰ˆãƒ‡ãƒ¢

**ä»Šæ—¥ã®90åˆ†ã§ã€ã“ã‚Œã‚’ä½œã‚Šã¾ã™ï¼**

---

## ã‚¤ãƒ³ãƒˆãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³

### ğŸš€ ä»Šæ—¥å®Œæˆã•ã›ã‚‹ã‚¢ãƒ—ãƒª
- **å¹´é¸æŠ** â†’ å›½åˆ¥ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¡¨ç¤º
- **è¤‡æ•°å›½é¸æŠ** â†’ æ™‚ç³»åˆ—ã‚°ãƒ©ãƒ•æ¯”è¼ƒ  
- **æ§˜ã€…ãªã‚°ãƒ©ãƒ•ã‚¿ã‚¤ãƒ—** â†’ æ£’ã‚°ãƒ©ãƒ•ã€ç·šã‚°ãƒ©ãƒ•ã€å††ã‚°ãƒ©ãƒ•
- **ç¾ã—ã„UI** â†’ ã‚µã‚¤ãƒ‰ãƒãƒ¼ã€ã‚¿ãƒ–æ©Ÿèƒ½

### ğŸ“Š ä½¿ç”¨ã™ã‚‹ãƒ‡ãƒ¼ã‚¿
**æ—¥æœ¬æ”¿åºœãƒ“ã‚¶ç™ºè¡Œçµ±è¨ˆãƒ‡ãƒ¼ã‚¿**
- å¹´åˆ¥ãƒ»å›½åˆ¥ã®ãƒ“ã‚¶ç™ºè¡Œæ•°
- å®Ÿéš›ã®å…¬é–‹ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ï¼ˆå®Ÿè·µçš„ï¼ï¼‰

---

<!-- _class: lead -->

# Part 1: PandasåŸºç¤
## ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§æ‰±ãˆã‚‹ã‚ˆã†ã«ãªã‚ã†

---

## 1-1. ç’°å¢ƒæº–å‚™ã¨ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿

### ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
```python
import pandas as pd
import streamlit as st
import plotly.express as px
```

### CSVãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿
```python
# 'visa_number_in_japan.csv'ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãŠã
df = pd.read_csv('visa_number_in_japan.csv')
```

**ãƒã‚¤ãƒ³ãƒˆ**: `df`ã¯ã€ŒDataFrameã€ã®ç•¥ã€‚è¡¨å½¢å¼ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ã†åŸºæœ¬å½¢ã§ã™ã€‚

---

## 1-2. ãƒ‡ãƒ¼ã‚¿ã®è¦³å¯Ÿ

### ãƒ‡ãƒ¼ã‚¿ã®ä¸­èº«ã‚’è¦—ã„ã¦ã¿ã‚‹
```python
# æœ€åˆã®5è¡Œã‚’è¡¨ç¤º
df.head()

# ãƒ‡ãƒ¼ã‚¿ã®åŸºæœ¬æƒ…å ±ï¼ˆè¡Œæ•°ã€åˆ—æ•°ã€ãƒ‡ãƒ¼ã‚¿å‹ï¼‰
df.info()

# ãƒ‡ãƒ¼ã‚¿ã®ã‚µã‚¤ã‚ºï¼ˆè¡Œæ•°ã€åˆ—æ•°ï¼‰
df.shape

# åˆ—åã®ç¢ºèª
df.columns
```

**ğŸ” ç¢ºèªãƒã‚¤ãƒ³ãƒˆ**: ä½•å¹´åˆ†ã®ãƒ‡ãƒ¼ã‚¿ï¼Ÿã©ã‚“ãªå›½ãŒå«ã¾ã‚Œã¦ã„ã‚‹ï¼Ÿ

---

## 1-3. åŸºæœ¬çš„ãªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

### æ¡ä»¶ã‚’æŒ‡å®šã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’çµã‚Šè¾¼ã‚€
```python
# ä¸­å›½ã®ãƒ‡ãƒ¼ã‚¿ã ã‘ã‚’å–ã‚Šå‡ºã™
china_data = df[df['Country'] == 'China']
china_data.head()

# 2017å¹´ã®ãƒ‡ãƒ¼ã‚¿ã ã‘ã‚’å–ã‚Šå‡ºã™
year_2017 = df[df['Year'] == 2017]
year_2017.head()

# ç™ºè¡Œæ•°ãŒ10,000ä»¥ä¸Šã®ãƒ‡ãƒ¼ã‚¿
large_count = df[df['Number of issued_numerical'] >= 10000]
```

**ğŸ’¡ ãƒã‚¤ãƒ³ãƒˆ**: `df[æ¡ä»¶å¼]`ã§å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã ã‘ã‚’æŠ½å‡ºã§ãã‚‹

---

<!-- _class: lead -->

# Part 2: ãƒ‡ãƒ¼ã‚¿åˆ†æ
## é›†è¨ˆãƒ»ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ»è¤‡é›‘ãªæ¡ä»¶

---

## 2-1. è¤‡æ•°æ¡ä»¶ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

### ANDæ¡ä»¶ï¼ˆä¸¡æ–¹ã®æ¡ä»¶ã‚’æº€ãŸã™ï¼‰
```python
# 2017å¹´ã‹ã¤ä¸­å›½ã®ãƒ‡ãƒ¼ã‚¿
china_2017 = df[(df['Year'] == 2017) & (df['Country'] == 'China')]
```

### ORæ¡ä»¶ï¼ˆã„ãšã‚Œã‹ã®æ¡ä»¶ã‚’æº€ãŸã™ï¼‰
```python
# ä¸­å›½ã¾ãŸã¯éŸ“å›½ã®ãƒ‡ãƒ¼ã‚¿
china_or_korea = df[(df['Country'] == 'China') | (df['Country'] == 'Korea')]
```

### isin()ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆè¤‡æ•°ã®å€¤ã®ã„ãšã‚Œã‹ã«ä¸€è‡´ï¼‰
```python
# æŒ‡å®šã—ãŸå›½ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã¾ã¨ã‚ã¦å–å¾—
countries_list = ['China', 'Korea', 'United States']
selected_data = df[df['Country'].isin(countries_list)]
```

---

## 2-2. ãƒ‡ãƒ¼ã‚¿é›†è¨ˆï¼ˆgroupbyï¼‰

### å›½åˆ¥ã®åˆè¨ˆç™ºè¡Œæ•°
```python
country_totals = df.groupby('Country')['Number of issued_numerical'].sum()
print(country_totals.head())
```

### å¹´åˆ¥ã®åˆè¨ˆç™ºè¡Œæ•°
```python
yearly_totals = df.groupby('Year')['Number of issued_numerical'].sum()
print(yearly_totals)
```


**ğŸ”‘ ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆ**: `groupby()`ã¯Excelã®ãƒ”ãƒœãƒƒãƒˆãƒ†ãƒ¼ãƒ–ãƒ«ã®ã‚ˆã†ãªæ©Ÿèƒ½

---

## 2-3. æ¼”ç¿’ï¼šè‡ªåˆ†ã§ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’ä½œã‚ã†

### ğŸ¯ ãƒãƒ£ãƒ¬ãƒ³ã‚¸å•é¡Œ
**ä»¥ä¸‹ã®3ã¤ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’ä½œã£ã¦ã¿ã¾ã—ã‚‡ã†ï¼**

#### å•é¡Œ1: 2015å¹´ã®å›½åˆ¥TOP5ãƒ©ãƒ³ã‚­ãƒ³ã‚°
```python
# ãƒ’ãƒ³ãƒˆ: å¹´ã§ãƒ•ã‚£ãƒ«ã‚¿ â†’ å›½åˆ¥é›†è¨ˆ â†’ ä¸Šä½5ä½
ranking_2015 = # ã“ã“ã‚’æ›¸ã„ã¦ã¿ã‚ˆã†ï¼
```

#### å•é¡Œ2: å„å›½ã®å¹³å‡ç™ºè¡Œæ•°ãƒ©ãƒ³ã‚­ãƒ³ã‚°
```python
# ãƒ’ãƒ³ãƒˆ: sum()ã§ã¯ãªãmean()ã‚’ä½¿ã†
country_average = # ã“ã“ã‚’æ›¸ã„ã¦ã¿ã‚ˆã†ï¼
```

#### å•é¡Œ3: ãƒ“ã‚¶ç™ºè¡Œæ•°ãŒæœ€ã‚‚å¤šã„å¹´ã‚’æŒã¤å›½TOP3
```python
# ãƒ’ãƒ³ãƒˆ: max()ã‚’ä½¿ã£ã¦å„å›½ã®æœ€å¤§ç™ºè¡Œæ•°ã‚’æ±‚ã‚ã‚‹
country_max = # ã“ã“ã‚’æ›¸ã„ã¦ã¿ã‚ˆã†ï¼
```

---

### ğŸ’¡ è§£ç­”ä¾‹
```python
# å•é¡Œ1ã®è§£ç­”
ranking_2015 = df[df['Year'] == 2015].groupby('Country')['Number of issued_numerical'].sum().sort_values(ascending=False).head(5)

# å•é¡Œ2ã®è§£ç­”  
country_average = df.groupby('Country')['Number of issued_numerical'].mean().sort_values(ascending=False)

# å•é¡Œ3ã®è§£ç­”
country_max = df.groupby('Country')['Number of issued_numerical'].max().sort_values(ascending=False)
```

**ğŸ” ç™ºè¦‹**: ãƒ‡ãƒ¼ã‚¿ã‚’æ§˜ã€…ãªè§’åº¦ã‹ã‚‰é›†è¨ˆã™ã‚‹ã¨ã€æ–°ã—ã„æ´å¯ŸãŒå¾—ã‚‰ã‚Œã¾ã™ï¼

---

<!-- _class: lead -->

# Part 3: Streamlité€£æº
## ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªWebã‚¢ãƒ—ãƒªã‚’ä½œã‚ã†

---

## 3-1. åŸºæœ¬çš„ãªUIè¦ç´ 

### ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ï¼ˆãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ï¼‰
```python
countries = df['Country'].unique()  # å›½ã®ãƒªã‚¹ãƒˆã‚’å–å¾—
selected_country = st.selectbox('å›½ã‚’é¸æŠ', countries)

# é¸æŠã•ã‚ŒãŸå›½ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º
country_data = df[df['Country'] == selected_country]
st.dataframe(country_data)
```

### ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ï¼ˆæ•°å€¤é¸æŠï¼‰
```python
selected_year = st.slider('å¹´ã‚’é¸æŠ', 
                         min_value=int(df['Year'].min()), 
                         max_value=int(df['Year'].max()), 
                         value=2017)
```

---

### ãƒãƒ«ãƒã‚»ãƒ¬ã‚¯ãƒˆï¼ˆè¤‡æ•°é¸æŠï¼‰
```python
selected_countries = st.multiselect(
    'è¤‡æ•°å›½ã‚’é¸æŠ', 
    countries, 
    default=['China', 'Korea']  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé¸æŠ
)

# é¸æŠã•ã‚ŒãŸå›½ã€…ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º
multi_data = df[df['Country'].isin(selected_countries)]
st.dataframe(multi_data)
```

**ğŸ® ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã•ãŒéµ**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ“ä½œã§ãã‚‹ã‚¢ãƒ—ãƒªã«ï¼

---

## 3-2. ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ‡ãƒ¼ã‚¿è¡¨ç¤º

### å¹´é¸æŠ â†’ ãã®å¹´ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¡¨ç¤º
```python
# ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã§å¹´ã‚’é¸æŠ
selected_year = st.slider('å¹´ã‚’é¸æŠ', 2006, 2017, 2017)

# ãã®å¹´ã®ãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡º
year_data = df[df['Year'] == selected_year]

# å›½åˆ¥é›†è¨ˆã¨ãƒ©ãƒ³ã‚­ãƒ³ã‚°
ranking = year_data.groupby('Country')['Number of issued_numerical'].sum().sort_values(ascending=False).head(10)

# çµæœã‚’è¡¨ç¤º
st.subheader(f'{selected_year}å¹´ å›½åˆ¥TOP10')
st.dataframe(ranking)
```

---

## 3-3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### st.cache_dataã§ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã‚’é«˜é€ŸåŒ–
```python
@st.cache_data
def load_data():
    """ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ä¿å­˜"""
    return pd.read_csv('visa_number_in_japan.csv')

# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨
df = load_data()
```

**âš¡ åŠ¹æœ**: 2å›ç›®ä»¥é™ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒé«˜é€Ÿã«ãªã‚‹ï¼

### ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ã®æ´»ç”¨
```python
# ãƒšãƒ¼ã‚¸ãƒªãƒ­ãƒ¼ãƒ‰æ™‚ã«ã‚‚é¸æŠçŠ¶æ…‹ã‚’ä¿æŒ
if 'selected_countries' not in st.session_state:
    st.session_state.selected_countries = ['China', 'Korea']
```

---

<!-- _class: lead -->

# Part 4: ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–
## ãƒ‡ãƒ¼ã‚¿ã‚’ç¾ã—ãã€åˆ†ã‹ã‚Šã‚„ã™ãè¡¨ç¾

---

## 4-1. Streamlitã®åŸºæœ¬ã‚°ãƒ©ãƒ•

### å¹´åˆ¥æ¨ç§»ã®æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•
```python
yearly_totals = df.groupby('Year')['Number of issued_numerical'].sum()
st.line_chart(yearly_totals)
```

### å›½åˆ¥ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã®æ£’ã‚°ãƒ©ãƒ•
```python
top10_2023 = df[df['Year'] == 2023].groupby('Country')['Number of issued_numerical'].sum().sort_values(ascending=False).head(10)
st.bar_chart(top10_2023)
```

**ğŸ‘ ãƒ¡ãƒªãƒƒãƒˆ**: ã‚·ãƒ³ãƒ—ãƒ«ã§é«˜é€Ÿã€ã‚³ãƒ¼ãƒ‰ãŒçŸ­ã„
**ğŸ‘ ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**: ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒé™å®šçš„

---

## 4-2. Plotly Expressã«ã‚ˆã‚‹é«˜åº¦ãªã‚°ãƒ©ãƒ•

### ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªæŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•
```python
import plotly.express as px

# ãƒ‡ãƒ¼ã‚¿ã®æº–å‚™
line_data = df.groupby(['Year', 'Country'])['Number of issued_numerical'].sum().reset_index()

# ä¸Šä½5ã‚«å›½ã ã‘ã‚’ã‚°ãƒ©ãƒ•åŒ–
top5_countries = df.groupby('Country')['Number of issued_numerical'].sum().sort_values(ascending=False).head(5).index
line_data_top5 = line_data[line_data['Country'].isin(top5_countries)]

# ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªæŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•
fig_line = px.line(line_data_top5, 
                   x='Year', 
                   y='Number of issued_numerical', 
                   color='Country',
                   title='ä¸Šä½5ã‚«å›½ã®å¹´æ¬¡æ¨ç§»')
st.plotly_chart(fig_line)
```

---

### ç¾ã—ã„æ£’ã‚°ãƒ©ãƒ•
```python
# 2017å¹´TOP10ãƒ‡ãƒ¼ã‚¿ã®æº–å‚™
top10_data = df[df['Year'] == 2017].groupby('Country')['Number of issued_numerical'].sum().sort_values(ascending=False).head(10).reset_index()

# ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸæ£’ã‚°ãƒ©ãƒ•
fig_bar = px.bar(top10_data, 
                 x='Country', 
                 y='Number of issued_numerical',
                 title='2017å¹´ å›½åˆ¥ãƒ“ã‚¶ç™ºè¡Œæ•° TOP10',
                 color='Number of issued_numerical',
                 color_continuous_scale='Blues')

# è»¸ãƒ©ãƒ™ãƒ«ã®å›è»¢
fig_bar.update_layout(xaxis_tickangle=-45)
st.plotly_chart(fig_bar)
```

---

### å††ã‚°ãƒ©ãƒ•ã§æ§‹æˆæ¯”ã‚’è¡¨ç¤º
```python
# å††ã‚°ãƒ©ãƒ•ç”¨ãƒ‡ãƒ¼ã‚¿
pie_data = df[df['Year'] == 2017].groupby('Country')['Number of issued_numerical'].sum().head(10).reset_index()

fig_pie = px.pie(pie_data, 
                 values='Number of issued_numerical', 
                 names='Country',
                 title='2017å¹´ å›½åˆ¥æ§‹æˆæ¯” (TOP10)')
st.plotly_chart(fig_pie)
```

**âœ¨ Plotlyã®å¼·ã¿**: ã‚ºãƒ¼ãƒ ã€ãƒ‘ãƒ³ã€ãƒ›ãƒãƒ¼æƒ…å ±ãªã©ã€ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ©Ÿèƒ½ãŒè±Šå¯Œ

---

## 4-3. è¤‡æ•°å›½ã®æ™‚ç³»åˆ—æ¯”è¼ƒ

### ãƒ¦ãƒ¼ã‚¶ãƒ¼é¸æŠã«ã‚ˆã‚‹å‹•çš„ã‚°ãƒ©ãƒ•
```python
# ãƒãƒ«ãƒã‚»ãƒ¬ã‚¯ãƒˆã§å›½ã‚’é¸æŠ
selected_countries = st.multiselect('æ¯”è¼ƒã—ãŸã„å›½ã‚’é¸æŠ', 
                                   countries, 
                                   default=['China', 'Korea', 'United States'])

if selected_countries:  # é¸æŠã•ã‚ŒãŸå›½ãŒã‚ã‚‹å ´åˆã®ã¿
    # é¸æŠã•ã‚ŒãŸå›½ã®ãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡º
    filtered_data = df[df['Country'].isin(selected_countries)]
    comparison_data = filtered_data.groupby(['Year', 'Country'])['Number of issued_numerical'].sum().reset_index()
    
    # æ¯”è¼ƒã‚°ãƒ©ãƒ•ã‚’ä½œæˆ
    fig_comparison = px.line(comparison_data, 
                            x='Year', 
                            y='Number of issued_numerical', 
                            color='Country',
                            title='é¸æŠå›½ã®å¹´æ¬¡æ¨ç§»æ¯”è¼ƒ')
    st.plotly_chart(fig_comparison)
```

---

<!-- _class: lead -->

# Part 5: ç·åˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ä½œæˆ
## ğŸ¯ æ¼”ç¿’ï¼šå®Œæˆç‰ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’ä½œã‚ã†ï¼



---

## ğŸš€ æ¼”ç¿’ã®ç›®æ¨™

**ä»¥ä¸‹ã®æ©Ÿèƒ½ã‚’æŒã¤ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’ä½œæˆã—ã¦ãã ã•ã„ï¼**

### ğŸ“‹ å®Œæˆã‚¤ãƒ¡ãƒ¼ã‚¸
- **ã‚µã‚¤ãƒ‰ãƒãƒ¼**ã§å¹´ãƒ»å›½ãƒ»ã‚°ãƒ©ãƒ•ã‚¿ã‚¤ãƒ—ã‚’é¸æŠ
- **ã‚¿ãƒ–æ©Ÿèƒ½**ã§ã€Œãƒ©ãƒ³ã‚­ãƒ³ã‚°ã€ã€Œæ™‚ç³»åˆ—æ¯”è¼ƒã€ã€Œæ§‹æˆæ¯”ã€ã‚’åˆ‡ã‚Šæ›¿ãˆ
- **å‹•çš„ãªã‚°ãƒ©ãƒ•**ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ã®é¸æŠã«å¿œã˜ã¦æ›´æ–°ã•ã‚Œã‚‹

### âœ¨ å¿…è¦ãªæ©Ÿèƒ½ä¸€è¦§
1. ğŸ›ï¸ ã‚µã‚¤ãƒ‰ãƒãƒ¼ã«ã‚ˆã‚‹æ“ä½œãƒ‘ãƒãƒ«
2. ğŸ“Š ã‚¿ãƒ–ã«ã‚ˆã‚‹æ©Ÿèƒ½åˆ†ã‘
3. ğŸ“ˆ é¸æŠã«å¿œã˜ãŸå‹•çš„ã‚°ãƒ©ãƒ•è¡¨ç¤º

---

## ğŸ”§ å®Ÿè£…æ‰‹é †

### ã‚¹ãƒ†ãƒƒãƒ—1: ã‚µã‚¤ãƒ‰ãƒãƒ¼ã«ã‚ˆã‚‹æ“ä½œãƒ‘ãƒãƒ«ã‚’ä½œæˆ
```python
# ã‚µã‚¤ãƒ‰ãƒãƒ¼ã«è¨­å®šã‚’é…ç½®
st.sidebar.header('ğŸ›ï¸ è¨­å®šãƒ‘ãƒãƒ«')
selected_year = st.sidebar.slider('å¹´ã‚’é¸æŠ', 2006, 2017, 2017)
selected_countries = st.sidebar.multiselect('å›½ã‚’é¸æŠ', countries, default=['China', 'Korea'])
graph_type = st.sidebar.selectbox('ã‚°ãƒ©ãƒ•ã‚¿ã‚¤ãƒ—', ['æŠ˜ã‚Œç·š', 'æ£’ã‚°ãƒ©ãƒ•', 'å††ã‚°ãƒ©ãƒ•'])
```

### ã‚¹ãƒ†ãƒƒãƒ—2: ã‚¿ãƒ–ã«ã‚ˆã‚‹æ©Ÿèƒ½åˆ†ã‘ã‚’å®Ÿè£…
```python
# ãƒ¡ã‚¤ãƒ³ã‚¨ãƒªã‚¢ã‚’ã‚¿ãƒ–ã§åˆ†å‰²
tab1, tab2, tab3 = st.tabs(['ğŸ“Š ãƒ©ãƒ³ã‚­ãƒ³ã‚°', 'ğŸ“ˆ æ™‚ç³»åˆ—æ¯”è¼ƒ', 'ğŸ¥§ æ§‹æˆæ¯”'])

with tab1:
    st.subheader(f'{selected_year}å¹´ å›½åˆ¥ãƒ©ãƒ³ã‚­ãƒ³ã‚°')
    # ã“ã“ã«ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¡¨ç¤ºã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ãã ã•ã„

with tab2:
    st.subheader('è¤‡æ•°å›½ã®æ¨ç§»æ¯”è¼ƒ')
    # ã“ã“ã«æ™‚ç³»åˆ—æ¯”è¼ƒã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ãã ã•ã„
    
with tab3:
    st.subheader('å›½åˆ¥æ§‹æˆæ¯”')
    # ã“ã“ã«å††ã‚°ãƒ©ãƒ•ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ãã ã•ã„
```

---

## ğŸ’¡ å®Ÿè£…ã®ãƒ’ãƒ³ãƒˆ

### ã‚¿ãƒ–1ã€Œãƒ©ãƒ³ã‚­ãƒ³ã‚°ã€ã«å®Ÿè£…ã™ã‚‹ã“ã¨
- ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§é¸æŠã—ãŸå¹´ã®ãƒ‡ãƒ¼ã‚¿ã§ãƒ©ãƒ³ã‚­ãƒ³ã‚°ä½œæˆ
- `graph_type`ã®é¸æŠã«å¿œã˜ã¦ã‚°ãƒ©ãƒ•ã‚’åˆ‡ã‚Šæ›¿ãˆ
- ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ†ãƒ¼ãƒ–ãƒ«ã‚‚è¡¨ç¤º

### ã‚¿ãƒ–2ã€Œæ™‚ç³»åˆ—æ¯”è¼ƒã€ã«å®Ÿè£…ã™ã‚‹ã“ã¨  
- ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§é¸æŠã—ãŸå›½ã€…ã®å¹´æ¬¡æ¨ç§»ã‚’æ¯”è¼ƒ
- Plotlyã®æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•ã‚’ä½¿ç”¨
- å›½ãŒé¸æŠã•ã‚Œã¦ã„ãªã„å ´åˆã®å¯¾å¿œ

### ã‚¿ãƒ–3ã€Œæ§‹æˆæ¯”ã€ã«å®Ÿè£…ã™ã‚‹ã“ã¨
- ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§é¸æŠã—ãŸå¹´ã®æ§‹æˆæ¯”ã‚’å††ã‚°ãƒ©ãƒ•ã§è¡¨ç¤º
- TOP10ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨

---

## ğŸ¯ ãƒãƒ£ãƒ¬ãƒ³ã‚¸ç›®æ¨™

**ä»¥ä¸‹ã®å…¨ã¦ã®è¦ä»¶ã‚’æº€ãŸã™ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’å®Œæˆã•ã›ã‚ˆã†ï¼**

âœ… ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§å¹´ãƒ»å›½ãƒ»ã‚°ãƒ©ãƒ•ã‚¿ã‚¤ãƒ—ãŒé¸æŠã§ãã‚‹  
âœ… ã‚¿ãƒ–ã§æ©Ÿèƒ½ãŒåˆ†ã‹ã‚Œã¦ã„ã‚‹  
âœ… é¸æŠã«å¿œã˜ã¦ã‚°ãƒ©ãƒ•ãŒå‹•çš„ã«å¤‰æ›´ã•ã‚Œã‚‹  
âœ… ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãªã„ï¼ˆä¾‹ï¼šå›½ãŒæœªé¸æŠã®å ´åˆï¼‰  
âœ… ç¾ã—ãè¦‹ã‚„ã™ã„ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

---

<!-- _class: lead -->

## ğŸ‰ å®Œæˆï¼

**ã‚ãªãŸã‚‚ä»Šæ—¥ã€ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ãƒ†ã‚£ã‚¹ãƒˆã®ç¬¬ä¸€æ­©ã‚’è¸ã¿å‡ºã—ã¾ã—ãŸ**

---

## ã¾ã¨ã‚ã¨æŒ¯ã‚Šè¿”ã‚Š

### ğŸ“š ä»Šæ—¥å­¦ã‚“ã ã“ã¨
1. **PandasåŸºç¤**: ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ãƒ»è¦³å¯Ÿãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
2. **ãƒ‡ãƒ¼ã‚¿åˆ†æ**: é›†è¨ˆãƒ»ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ»è¤‡æ•°æ¡ä»¶å‡¦ç†
3. **Streamlité€£æº**: ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªUIä½œæˆ
4. **ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–**: åŸºæœ¬ã‚°ãƒ©ãƒ• + Plotly Express
5. **çµ±åˆæŠ€è¡“**: å…¨æ©Ÿèƒ½ã‚’çµ„ã¿åˆã‚ã›ãŸãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

### ğŸš€ ä½œæˆã—ãŸæˆæœç‰©
**ã€Œã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ“ã‚¶ç™ºè¡Œæ•°åˆ†æãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã€**
- å®Ÿç”¨çš„ãªãƒ‡ãƒ¼ã‚¿åˆ†æãƒ„ãƒ¼ãƒ«
- ç¾ã—ãåˆ†ã‹ã‚Šã‚„ã™ã„å¯è¦–åŒ–
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

---

### ğŸ”— æ¬¡å›ä»¥é™ã¸ã®æ´»ç”¨
- **ä»–ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ**ã§ã‚‚åŒã˜æ‰‹æ³•ãŒä½¿ãˆã‚‹
- **ã‚ˆã‚Šé«˜åº¦ãªåˆ†æ**ã¸ã®æ‹¡å¼µãŒå¯èƒ½
- **ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹**ã®åŸºç¤ã‚¹ã‚­ãƒ«ã¨ã—ã¦æ´»ç”¨

### ğŸ’¡ ç¶™ç¶šå­¦ç¿’ã®ãƒ’ãƒ³ãƒˆ
- èˆˆå‘³ã®ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ã¤ã‘ã¦åŒã˜ã‚ˆã†ã«åˆ†æã—ã¦ã¿ã‚‹
- Plotlyã®ä»–ã®ã‚°ãƒ©ãƒ•ã‚¿ã‚¤ãƒ—ã‚’è©¦ã—ã¦ã¿ã‚‹  
- æ©Ÿæ¢°å­¦ç¿’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆscikit-learnï¼‰ã¸ã®ç™ºå±•

---

<!-- _class: lead -->

## ãŠç–²ã‚Œã•ã¾ã§ã—ãŸï¼

**ãƒ‡ãƒ¼ã‚¿ã®åŠ›ã§ä¸–ç•Œã‚’ç†è§£ã™ã‚‹æ¥½ã—ã•ã‚’æ„Ÿã˜ã¦ã„ãŸã ã‘ã¾ã—ãŸã‹ï¼Ÿ**

**æ¬¡å›ã‚‚ãŠæ¥½ã—ã¿ã«ï¼** 
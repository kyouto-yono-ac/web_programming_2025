# 第6回 Streamlit発展 (1): 入力ウィジェット

## 基本情報

- **授業時間:** 90分 (実質70-80分程度を想定)
- **形式:** 講義 + 演習 (Streamlit Cloud + GitHub.dev または ローカル環境)
- **必要機材:** ノートPC、インターネット接続、GitHubアカウント

## 授業の目標

この授業では、Streamlit アプリケーションをインタラクティブにするための様々な入力ウィジェットの使い方を習得します。ユーザーからの入力を受け取り、それに応じてアプリの動作を変化させる方法を学びます。
具体的には以下の点を目標とします。

1.  **ボタン:** `st.button` を使って、クリックイベントをトリガーする方法を学ぶ。
2.  **選択肢 (単一):** `st.selectbox`, `st.radio` を使って、複数の選択肢から一つを選ばせる方法を学ぶ。
3.  **選択肢 (複数):** `st.multiselect` を使って、複数の選択肢を同時に選ばせる方法を学ぶ。
4.  **数値入力:** `st.slider`, `st.number_input` を使って、数値（範囲指定、個別指定）を入力させる方法を学ぶ。
5.  **テキスト入力:** `st.text_input`, `st.text_area` を使って、一行または複数行のテキストを入力させる方法を学ぶ（`text_input` は復習）。
6.  **日付入力:** `st.date_input` を使って、日付を入力させる方法を学ぶ。
7.  **入力値の利用:** 各ウィジェットから返される値を取得し、アプリの表示や処理に反映させる方法を理解する。

## タイムスケジュール (目安)

| 時間       | 内容                                     | 詳細                                                                     |
| ---------- | ---------------------------------------- | ------------------------------------------------------------------------ |
| 00:00-00:05 | 前回の復習と本日の目標                   | レイアウト機能の復習、インタラクティブ性の重要性、本日の流れ説明           |
| 00:05-00:15 | ボタン (`st.button`)                     | クリック判定、返り値 (True/False) の使い方、簡単なカウンター例             |
| 00:15-00:30 | 単一選択 (`st.selectbox`, `st.radio`)    | ドロップダウンとラジオボタンの違い、選択肢の指定、選択された値の取得と利用 |
| 00:30-00:40 | 複数選択 (`st.multiselect`)              | 複数選択のインターフェース、選択された値 (リスト) の取得と利用             |
| 00:40-00:55 | 数値入力 (`st.slider`, `st.number_input`) | スライダー (範囲選択) と数値入力ボックス、最小/最大値、ステップ指定      |
| 00:55-01:05 | テキスト入力 (`st.text_input`, `st.text_area`) | 一行入力と複数行入力、プレースホルダー、最大文字数指定                     |
| 01:05-01:15 | 日付入力 (`st.date_input`)               | カレンダーからの日付選択、デフォルト値、返り値 (datetimeオブジェクト)     |
| 01:15-01:25 | 総合演習                                 | 複数の入力ウィジェットを組み合わせ、ユーザーの入力に応じて結果が変わるアプリ |
| 01:25-01:30 | まとめと次回予告                         | 本日の内容の振り返り、次回 (Streamlit 発展 2: 状態管理) の予告、質疑応答   |

## 授業内容の詳細

### 1. 前回の復習と本日の目標 (5分)
- 前回の授業で学んだ Streamlit のレイアウト機能 (`st.sidebar`, `st.columns`, `st.tabs`, `st.expander`) を簡単に振り返ります。
- これまでのアプリは情報を表示するだけでしたが、ユーザーの操作で内容が変わる「インタラクティブな」アプリの重要性を説明します。
- 本日の目標である各種入力ウィジェットの習得を確認します。

### 2. ボタン (`st.button`) (10分)
- ユーザーがクリックできるボタンを作成する `st.button("ラベル")` の使い方を学びます。
- ボタンがクリックされた時に `True` を、それ以外では `False` を返す性質を利用して、クリックイベントを処理する方法を解説します。
- 簡単なクリックカウンターなどのデモと演習を行います。

### 3. 単一選択 (`st.selectbox`, `st.radio`) (15分)
- `st.selectbox("ラベル", [選択肢リスト])`: ドロップダウンリストから一つを選択させる方法を学びます。
- `st.radio("ラベル", [選択肢リスト])`: ラジオボタンで一つを選択させる方法を学びます。
- 選択肢の指定方法、デフォルト値の設定、選択された値を取得して利用する方法を解説します。
- 両者の見た目と使い分けについて考えます。

### 4. 複数選択 (`st.multiselect`) (10分)
- `st.multiselect("ラベル", [選択肢リスト])`: チェックボックス形式で複数の項目を選択させる方法を学びます。
- 選択された項目がリストとして返されることを確認し、そのリストを処理する方法を解説します。

### 5. 数値入力 (`st.slider`, `st.number_input`) (15分)
- `st.slider("ラベル", min_value, max_value, value, step)`: スライダーを使って特定の範囲から数値を選択させる方法を学びます。範囲、初期値、刻み幅を指定できます。
- `st.number_input("ラベル", min_value, max_value, value, step)`: 数値を直接入力または+/-ボタンで調整させる方法を学びます。
- 用途に応じた使い分け（直感的な範囲選択 vs 精密な数値入力）を考えます。

### 6. テキスト入力 (`st.text_input`, `st.text_area`) (10分)
- `st.text_input("ラベル", value="", placeholder="")`: 一行のテキスト入力を受け付けます（復習）。プレースホルダーなどのオプションも紹介します。
- `st.text_area("ラベル", value="", height=None)`: 複数行のテキスト入力を受け付けます。高さを指定することも可能です。

### 7. 日付入力 (`st.date_input`) (10分)
- `st.date_input("ラベル", value=None)`: カレンダーから日付を選択させる方法を学びます。
- デフォルトの日付を指定する方法や、返り値が Python の `datetime` オブジェクトであることなどを解説します。

### 8. 総合演習 (10分)
- これまでに学んだ複数の入力ウィジェット（例: selectbox でカテゴリ選択、slider で数値範囲指定、button で実行）を組み合わせ、ユーザーの入力に基づいて表示内容が変化する簡単なアプリケーションを作成します。

### 9. まとめと次回予告 (5分)
- 本日の学習内容（各種入力ウィジェット）を振り返り、ユーザー入力を受け取る方法を確認します。
- 次回は、これらの入力をアプリ全体で保持・活用するための「状態管理 (`st.session_state`)」について学ぶことを予告します。
- 質疑応答の時間を設けます。

## 準備物

### 教員側
- 講義用スライド (`06_slide.md`)
- 講義用サンプルコードリポジトリ (GitHub)
- 演習用課題指示

### 学生側
- ノートPC
- インターネット接続環境
- GitHubアカウント
- (推奨) 前回の授業内容 (Streamlit レイアウト) の理解

## 配布資料

- 講義用スライド PDF (`06_slide.pdf` - Marp で変換後)
- サンプルコードへのリンク (GitHub)
- 演習課題

## 次回予告

- **第7回: Streamlit発展 (2): 状態管理**
- `st.session_state` を使って、ウィジェット間の連携や複数回のインタラクションで情報を保持する方法を学びます。 